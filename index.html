<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PHP Code Generator by asika32764</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/asika32764/php-code-generator">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/asika32764/php-code-generator/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/asika32764/php-code-generator/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>PHP Code Generator</h1>
          <p>She is Goddess, she is the Creator.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/asika32764">asika32764</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a id="php-code-generator" class="anchor" href="#php-code-generator" aria-hidden="true"><span class="octicon octicon-link"></span></a>PHP Code Generator</h1>

<p><a href="https://packagist.org/packages/asika/php-code-generator"><img src="https://poser.pugx.org/asika/php-code-generator/v/stable.svg" alt="Latest Stable Version"></a> <a href="https://packagist.org/packages/asika/php-code-generator"><img src="https://poser.pugx.org/asika/php-code-generator/downloads.svg" alt="Total Downloads"></a> <a href="https://packagist.org/packages/asika/php-code-generator"><img src="https://poser.pugx.org/asika/php-code-generator/v/unstable.svg" alt="Latest Unstable Version"></a> <a href="https://packagist.org/packages/asika/php-code-generator"><img src="https://poser.pugx.org/asika/php-code-generator/license.svg" alt="License"></a></p>

<p>A powerful php scaffolding framework, help developers generate their code by custom templates.</p>

<h2>
<a id="installation-via-composer" class="anchor" href="#installation-via-composer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation via Composer</h2>

<p>Add this dependency in your <code>composer.json</code>.</p>

<div class="highlight highlight-json"><pre>{
    <span class="pl-s1"><span class="pl-pds">"</span>require<span class="pl-pds">"</span></span>: {
        <span class="pl-s1"><span class="pl-pds">"</span>asika/php-code-generator<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>2.*<span class="pl-pds">"</span></span>,
        <span class="pl-s1"><span class="pl-pds">"</span>windwalker/console<span class="pl-pds">"</span></span>: <span class="pl-s1"><span class="pl-pds">"</span>~2.0<span class="pl-pds">"</span></span>
    }
}</pre></div>

<p>Or just create a project:</p>

<div class="highlight highlight-shell"><pre>php composer.phar create-project asika/php-code-generator php-code-generator 2.<span class="pl-k">*</span></pre></div>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<p>PHP Code Generator is a command line based program, we will do everything though CLI. Please type:</p>

<div class="highlight highlight-shell"><pre>php bin/generator</pre></div>

<p>You will get this help message:</p>

<pre><code>PHP Code Generator - version: 2
------------------------------------------------------------

[generator Help]

The default application command

Usage:
  generator &lt;command&gt; [option]


Options:

  -h | --help       Display this help message.
  -q | --quiet      Do not output any message.
  -v | --verbose    Increase the verbosity of messages.
  --ansi            Set 'off' to suppress ANSI colors on unsupported terminals.
  -p | --path       Dest path.
  -t | --tmpl       Sub template name.

Commands:

  gen             Genarate operation.
  tmpl-init       Init a new template.
  tmpl-convert    Convert a directory and files back to a template.
</code></pre>

<h3>
<a id="generate-code-by-acme-template" class="anchor" href="#generate-code-by-acme-template" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generate code by Acme Template</h3>

<p>Acme template is a default template in PHP Code Generator, generating code is very easy, please type:</p>

<div class="highlight highlight-bash"><pre>php bin/generator gen acme <span class="pl-s3">test</span>/MyApp</pre></div>

<p>Now you will see message like below:</p>

<div class="highlight highlight-bash"><pre>$ php bin/generator gen acme <span class="pl-s3">test</span>/MyApp
File created: /var/www/php-code-generator/test/MyApp/admin/article/edit.twig
File created: /var/www/php-code-generator/test/MyApp/admin/article/index.twig
File created: /var/www/php-code-generator/test/MyApp/admin/category/edit.twig
File created: /var/www/php-code-generator/test/MyApp/admin/category/index.twig
File created: /var/www/php-code-generator/test/MyApp/article.twig
File created: /var/www/php-code-generator/test/MyApp/global/index.html
File created: /var/www/php-code-generator/test/MyApp/index.html
File created: /var/www/php-code-generator/test/MyApp/index.twig</pre></div>

<h3>
<a id="put-your-subtemplate-to-acme-template" class="anchor" href="#put-your-subtemplate-to-acme-template" aria-hidden="true"><span class="octicon octicon-link"></span></a>Put your SubTemplate to Acme Template</h3>

<p>Now you can put your code to <code>src/AcmeTemplate/Template/mytmpl</code>.</p>

<p>And using this command to generate your sub template:</p>

<div class="highlight highlight-bash"><pre>php bin/generator gen acme <span class="pl-s3">test</span>/MyApp2 -t mytmpl</pre></div>

<h2>
<a id="create-your-project-template" class="anchor" href="#create-your-project-template" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create your project template</h2>

<p>Now everything is very easy, but how can we create our own template? We have to write some code to configure paths and variables.</p>

<h3>
<a id="init-a-sample-template" class="anchor" href="#init-a-sample-template" aria-hidden="true"><span class="octicon octicon-link"></span></a>Init a sample template</h3>

<p>Using this command to init a new template.</p>

<div class="highlight highlight-bash"><pre>php bin/generator tmpl-init flower</pre></div>

<pre><code>File created: /var/www/php-code-generator/src/FlowerTemplate/Action/ConvertAction.php
File created: /var/www/php-code-generator/src/FlowerTemplate/Action/CopyAllAction.php
File created: /var/www/php-code-generator/src/FlowerTemplate/Task/Convert.php
File created: /var/www/php-code-generator/src/FlowerTemplate/Task/Generate.php
File created: /var/www/php-code-generator/src/FlowerTemplate/Template/default/DefaultClass.php
File created: /var/www/php-code-generator/src/FlowerTemplate/FlowerTemplate.php
</code></pre>

<p>OK, we created a sample template named <code>flower</code>, this template will locate at <code>src/FlowerTemplate</code> with an entry class <code>FlowerTemplate</code>,
actually you can create it manually, but this will be a little complex, so we are better using the sample first.</p>

<h3>
<a id="configure-variable-and-paths" class="anchor" href="#configure-variable-and-paths" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure Variable and Paths</h3>

<p>Open <code>FlowerTemplate</code>, you can set replaced string and copy path here:</p>

<h4>
<a id="register-replacing-variables" class="anchor" href="#register-replacing-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Register replacing variables</h4>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-s">protected</span> <span class="pl-vo">$tagVariable</span> <span class="pl-k">=</span> <span class="pl-s3">array</span>(<span class="pl-s1"><span class="pl-pds">'</span>{@<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>@}<span class="pl-pds">'</span></span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-s">protected</span> <span class="pl-st">function</span> <span class="pl-en">registerReplaces</span>(<span class="pl-vo">$io</span>, <span class="pl-vo">$replace</span> <span class="pl-k">=</span> <span class="pl-s3">array</span>())</span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-vo">$item</span> <span class="pl-k">=</span> <span class="pl-vo">$io</span><span class="pl-k">-&gt;</span>getOption(<span class="pl-s1"><span class="pl-pds">'</span>n<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>sakura<span class="pl-pds">'</span></span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-c">/*</span></span>
<span class="pl-s2"><span class="pl-c">     * Replace with your code name.</span></span>
<span class="pl-s2"><span class="pl-c">     */</span></span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-c">// Set item name, default is sakura</span></span>
<span class="pl-s2">    <span class="pl-vo">$replace</span>[<span class="pl-s1"><span class="pl-pds">'</span>item.lower<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-s3">strtolower</span>(<span class="pl-vo">$item</span>);</span>
<span class="pl-s2">    <span class="pl-vo">$replace</span>[<span class="pl-s1"><span class="pl-pds">'</span>item.upper<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-s3">strtoupper</span>(<span class="pl-vo">$item</span>);</span>
<span class="pl-s2">    <span class="pl-vo">$replace</span>[<span class="pl-s1"><span class="pl-pds">'</span>item.cap<span class="pl-pds">'</span></span>]   <span class="pl-k">=</span> <span class="pl-s3">ucfirst</span>(<span class="pl-vo">$item</span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-c">// Set project name</span></span>
<span class="pl-s2">    <span class="pl-vo">$replace</span>[<span class="pl-s1"><span class="pl-pds">'</span>project.class<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>CodeGenerator<span class="pl-pds">'</span></span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-k">return</span> <span class="pl-vo">$replace</span>;</span>
<span class="pl-s2">}</span></pre></div>

<p>This example means we can type <code>-n {item}</code> to be a variable name. And in template code,
the <code>{@item.lower@}</code> /<code>{@item.upper@}</code> /<code>{@item.cap@}</code> will be replace to the item name.</p>

<p><code>sakura</code> is the default value if you don't give the <code>-n</code> param. This is an example that if <code>-n</code> not found,
just exit and notice user type this param:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-vo">$item</span> <span class="pl-k">=</span> <span class="pl-vo">$io</span><span class="pl-k">-&gt;</span>getOption(<span class="pl-s1"><span class="pl-pds">'</span>n<span class="pl-pds">'</span></span>) ? : <span class="pl-k">exit</span>(<span class="pl-s1"><span class="pl-pds">'</span>Please give me item using "-n {item_name}"<span class="pl-pds">'</span></span>);</span></pre></div>

<p>You can add many string to <code>$replace</code> array, remember you will need each lower, upper and capital cases, and don't forget to return it.</p>

<h4>
<a id="register-config--paths" class="anchor" href="#register-config--paths" aria-hidden="true"><span class="octicon octicon-link"></span></a>Register Config &amp; Paths</h4>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-s">protected</span> <span class="pl-st">function</span> <span class="pl-en">registerConfig</span>(<span class="pl-vo">$io</span>, <span class="pl-vo">$config</span>)</span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-c">/*</span></span>
<span class="pl-s2"><span class="pl-c">     * Replace with your project path.</span></span>
<span class="pl-s2"><span class="pl-c">     */</span></span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-vo">$subTemplate</span> <span class="pl-k">=</span> <span class="pl-vo">$io</span><span class="pl-k">-&gt;</span>getOption(<span class="pl-s1"><span class="pl-pds">'</span>t<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span>);</span>
<span class="pl-s2">    <span class="pl-vo">$dest</span>        <span class="pl-k">=</span> <span class="pl-vo">$io</span><span class="pl-k">-&gt;</span>getArgument(<span class="pl-c1">1</span>) ? : <span class="pl-s1"><span class="pl-pds">'</span>generated<span class="pl-pds">'</span></span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-vo">$config</span>[<span class="pl-s1"><span class="pl-pds">'</span>path.src<span class="pl-pds">'</span></span>]  <span class="pl-k">=</span> <span class="pl-c1">__DIR__</span> <span class="pl-k">.</span> <span class="pl-sr"><span class="pl-pds">'/</span>Template<span class="pl-pds">/'</span></span> <span class="pl-k">.</span> <span class="pl-vo">$subTemplate</span>;</span>
<span class="pl-s2">    <span class="pl-vo">$config</span>[<span class="pl-s1"><span class="pl-pds">'</span>path.dest<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-c1">GENERATOR_PATH</span> <span class="pl-k">.</span> <span class="pl-s1"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span> <span class="pl-k">.</span> <span class="pl-vo">$dest</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-k">return</span> <span class="pl-vo">$config</span>;</span>
<span class="pl-s2">}</span></pre></div>

<p>You can set some useful config in this method, the most important is <code>path.src</code> and <code>path.dest</code>. These two config tell PHP Code Generator
  where code from and where code copied to.</p>

<p><code>GENERATOR_PATH</code> is root path of PHP Code Generator, and the <code>$io-&gt;getArgument(1)</code> means get second argument of your command(First is 0).</p>

<h3>
<a id="task--action" class="anchor" href="#task--action" aria-hidden="true"><span class="octicon octicon-link"></span></a>Task &amp; Action</h3>

<p>We have two default task controller, <code>Generate</code> and <code>Convert</code>.</p>

<p>Generate task does the code generate action, and Convert task can help us convert code back to a template.
In task controller we can using <code>doAction()</code> to execute some different action to do something we want to do.</p>

<p>The <code>Generate</code> controller class:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-k">namespace</span> <span class="pl-en">FlowerTemplate\Task</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">FlowerTemplate\Action</span>;</span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">CodeGenerator\Controller\AbstractTaskController</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-st">class</span> <span class="pl-en">Generate</span> <span class="pl-s">extends</span> <span class="pl-e">AbstractTaskController</span></span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-s">public</span> <span class="pl-st">function</span> <span class="pl-en">execute</span>()</span>
<span class="pl-s2">    {</span>
<span class="pl-s2">        <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>doAction(<span class="pl-k">new</span> <span class="pl-s3">Action\</span><span class="pl-s3">CopyAllAction</span>);</span>
<span class="pl-s2">    }</span>
<span class="pl-s2">}</span></pre></div>

<p>The <code>CopyAllAction</code> class</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-k">namespace</span> <span class="pl-en">FlowerTemplate\Action</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">CodeGenerator\Action\AbstractAction</span>;</span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">CodeGenerator\FileOperator\CopyOperator</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-st">class</span> <span class="pl-en">CopyAllAction</span> <span class="pl-s">extends</span> <span class="pl-e">AbstractAction</span></span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-s">protected</span> <span class="pl-st">function</span> <span class="pl-en">doExecute</span>()</span>
<span class="pl-s2">    {</span>
<span class="pl-s2">        <span class="pl-vo">$copyOperator</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-s3">CopyOperator</span>(<span class="pl-vo">$this</span><span class="pl-k">-&gt;</span><span class="pl-vo">io</span>, (<span class="pl-st">array</span>) <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span><span class="pl-vo">config</span>[<span class="pl-s1"><span class="pl-pds">'</span>tag.variable<span class="pl-pds">'</span></span>]);</span>
<span class="pl-s2"></span>
<span class="pl-s2">        <span class="pl-vo">$copyOperator</span><span class="pl-k">-&gt;</span>copy(<span class="pl-vo">$this</span><span class="pl-k">-&gt;</span><span class="pl-vo">config</span>[<span class="pl-s1"><span class="pl-pds">'</span>path.src<span class="pl-pds">'</span></span>], <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span><span class="pl-vo">config</span>[<span class="pl-s1"><span class="pl-pds">'</span>path.dest<span class="pl-pds">'</span></span>], <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span><span class="pl-vo">config</span>[<span class="pl-s1"><span class="pl-pds">'</span>replace<span class="pl-pds">'</span></span>]);</span>
<span class="pl-s2">    }</span>
<span class="pl-s2">}</span></pre></div>

<p>These two class all very simple and follows single responsibility principle, we can organize our multiple actions in one controller like below:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-st">class</span> <span class="pl-en">Generate</span> <span class="pl-s">extends</span> <span class="pl-e">AbstractTaskController</span></span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-s">public</span> <span class="pl-st">function</span> <span class="pl-en">execute</span>()</span>
<span class="pl-s2">    {</span>
<span class="pl-s2">        <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>doAction(<span class="pl-k">new</span> <span class="pl-s3">Action\</span><span class="pl-s3">CopyAllAction</span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2">        <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>doAction(<span class="pl-k">new</span> <span class="pl-s3">Action\</span><span class="pl-s3">ImportSqlAction</span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2">        <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>doAction(<span class="pl-k">new</span> <span class="pl-s3">Action\Github\</span><span class="pl-s3">CloneSomeRepoAction</span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2">        <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>doAction(<span class="pl-k">new</span> <span class="pl-s3">Action\User\</span><span class="pl-s3">CreateNewUserAction</span>);</span>
<span class="pl-s2">    }</span>
<span class="pl-s2">}</span></pre></div>

<p>The benefit of single action class is that we can re-use every classes in different task.</p>

<h3>
<a id="file-operation" class="anchor" href="#file-operation" aria-hidden="true"><span class="octicon octicon-link"></span></a>File Operation</h3>

<h4>
<a id="operator-classes" class="anchor" href="#operator-classes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Operator classes</h4>

<p>We provides two operators now, <code>copyOperator</code> help us copy codes and replace tag to variables,
<code>convertOperator</code> help us copy code too, but replace variable by tags.</p>

<p>Just new an instance and using copy method:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-vo">$copyOperator</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-s3">CopyOperator</span>(<span class="pl-vo">$this</span><span class="pl-k">-&gt;</span><span class="pl-vo">io</span>, <span class="pl-s3">array</span>(<span class="pl-s1"><span class="pl-pds">'</span>{@<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>@}<span class="pl-pds">'</span></span>));</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-vo">$copyOperator</span><span class="pl-k">-&gt;</span>copy(<span class="pl-vo">$src</span>, <span class="pl-vo">$dest</span>, <span class="pl-vo">$replaceArray</span>);</span></pre></div>

<p>There will be more operator(eg: <code>databaseOperator</code>, <code>gitOperator</code>) in the future.</p>

<h4>
<a id="filesystem" class="anchor" href="#filesystem" aria-hidden="true"><span class="octicon octicon-link"></span></a>Filesystem</h4>

<p>There are three filesystem classes: <code>Path</code>, <code>File</code> and <code>Folder</code>, which extends from Joomla Filesystem package,
please see: <a href="https://github.com/joomla-framework/filesystem">https://github.com/joomla-framework/filesystem</a></p>

<p>Simple usage:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-k">namespace</span> <span class="pl-en">CodeGenerator\Filesystem</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-s3">Filesystem\</span><span class="pl-s3">Folder</span><span class="pl-k">::</span>copy(<span class="pl-vo">$src</span>, <span class="pl-vo">$dest</span>);</span>
<span class="pl-s2"><span class="pl-s3">Filesystem\</span><span class="pl-s3">Folder</span><span class="pl-k">::</span>move(<span class="pl-vo">$src</span>, <span class="pl-vo">$dest</span>);</span>
<span class="pl-s2"><span class="pl-s3">Filesystem\</span><span class="pl-s3">Folder</span><span class="pl-k">::</span>create(<span class="pl-vo">$path</span>);</span>
<span class="pl-s2"><span class="pl-s3">Filesystem\</span><span class="pl-s3">Folder</span><span class="pl-k">::</span>delete(<span class="pl-vo">$path</span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-s3">Filesystem\</span><span class="pl-s3">File</span><span class="pl-k">::</span>copy(<span class="pl-vo">$src</span>, <span class="pl-vo">$dest</span>);</span>
<span class="pl-s2"><span class="pl-s3">Filesystem\</span><span class="pl-s3">File</span><span class="pl-k">::</span>move(<span class="pl-vo">$src</span>, <span class="pl-vo">$dest</span>);</span>
<span class="pl-s2"><span class="pl-s3">Filesystem\</span><span class="pl-s3">File</span><span class="pl-k">::</span>write(<span class="pl-vo">$path</span>, <span class="pl-vo">$buffer</span>);</span>
<span class="pl-s2"><span class="pl-s3">Filesystem\</span><span class="pl-s3">File</span><span class="pl-k">::</span>delete(<span class="pl-vo">$path</span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-c">// Replace / and \ to DIRECTORY_SEPARATOR</span></span>
<span class="pl-s2"><span class="pl-vo">$path</span> <span class="pl-k">=</span> <span class="pl-s3">Filesystem\</span><span class="pl-s3">Path</span><span class="pl-k">::</span>clean(<span class="pl-vo">$path</span>);</span></pre></div>

<p>So you can using Filesystem classes in Action class to help you operate files and directories.</p>

<h3>
<a id="create-a-new-task" class="anchor" href="#create-a-new-task" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a new Task</h3>

<p>If you want a new task controller, this will need some steps to create a task. The process not very easy,
we will make the process easier in the future.</p>

<h4>
<a id="1-create-a-new-command" class="anchor" href="#1-create-a-new-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>(1) Create a new Command</h4>

<p>Create a command class in <code>src/CodeGenerator/Windwalker/Command/MyTask/MyTask.php</code></p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-k">namespace</span> <span class="pl-en">CodeGenerator\Windwalker\Command\MyTask</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">CodeGenerator\Controller\GeneratorController</span>;</span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">CodeGenerator\Windwalker\IO</span>;</span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">Joomla\Console\Command\Command</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-st">class</span> <span class="pl-en">MyTask</span> <span class="pl-s">extends</span> <span class="pl-e">Command</span></span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-s">protected</span> <span class="pl-vo">$name</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>mytask<span class="pl-pds">'</span></span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-s">protected</span> <span class="pl-vo">$description</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>Desc of my task.<span class="pl-pds">'</span></span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-s">protected</span> <span class="pl-vo">$usage</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>mytask &lt;cmd&gt;&lt;tmpl-name&gt;&lt;/cmd&gt; &lt;option&gt;[option]&lt;/option&gt;<span class="pl-pds">'</span></span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-s">public</span> <span class="pl-st">function</span> <span class="pl-en">configure</span>()</span>
<span class="pl-s2">    {</span>
<span class="pl-s2">        <span class="pl-st">parent</span><span class="pl-k">::</span>configure();</span>
<span class="pl-s2">    }</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-s">protected</span> <span class="pl-st">function</span> <span class="pl-en">doExecute</span>()</span>
<span class="pl-s2">    {</span>
<span class="pl-s2">        <span class="pl-vo">$controller</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-s3">GeneratorController</span>(<span class="pl-k">new</span> <span class="pl-s3">IO</span>(<span class="pl-vo">$this</span>));</span>
<span class="pl-s2"></span>
<span class="pl-s2">        <span class="pl-vo">$controller</span><span class="pl-k">-&gt;</span>setTask(<span class="pl-s1"><span class="pl-pds">'</span>mytask<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>execute();</span>
<span class="pl-s2">    }</span>
<span class="pl-s2">}</span></pre></div>

<p>How to use Joomla Console and Command? See: <a href="https://github.com/asika32764/joomla-framework-console">https://github.com/asika32764/joomla-framework-console</a></p>

<h4>
<a id="2-register-your-command-to-application" class="anchor" href="#2-register-your-command-to-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>(2) Register your command to application</h4>

<p>Register this command in <code>src/CodeGenerator/Windwalker/Application::registerCommands()</code></p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-s">protected</span> <span class="pl-st">function</span> <span class="pl-en">registerCommands</span>()</span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>addCommand(<span class="pl-k">new</span> <span class="pl-s3">Command\Generate\</span><span class="pl-s3">Generate</span>);</span>
<span class="pl-s2">    <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>addCommand(<span class="pl-k">new</span> <span class="pl-s3">Command\Init\</span><span class="pl-s3">Init</span>);</span>
<span class="pl-s2">    <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>addCommand(<span class="pl-k">new</span> <span class="pl-s3">Command\Convert\</span><span class="pl-s3">Convert</span>);</span>
<span class="pl-s2"></span>
<span class="pl-s2">    <span class="pl-c">// Add here</span></span>
<span class="pl-s2">    <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>addCommand(<span class="pl-k">new</span> <span class="pl-s3">Command\MyTask\</span><span class="pl-s3">Task</span>);</span>
<span class="pl-s2">}</span></pre></div>

<p>You will get new help like this:</p>

<pre><code>Available commands:

  help            List all arguments and show usage &amp; manual.

  gen             Genarate operation.

  tmpl-init       Init a new extension.

  tmpl-convert    Convert a code folder back to a template.

  mytask          Desc of my task.

</code></pre>

<h4>
<a id="3-create-a-new-task-controller" class="anchor" href="#3-create-a-new-task-controller" aria-hidden="true"><span class="octicon octicon-link"></span></a>(3) Create a new Task controller</h4>

<p>Create a class in <code>src/FlowerTemplate/Task/MyTask.php</code></p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-k">namespace</span> <span class="pl-en">FlowerTemplate\Task</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">FlowerTemplate\Action</span>;</span>
<span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">CodeGenerator\Controller\TaskController</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-st">class</span> <span class="pl-en">MyTask</span> <span class="pl-s">extends</span> <span class="pl-e">TaskController</span></span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-s">public</span> <span class="pl-st">function</span> <span class="pl-en">execute</span>()</span>
<span class="pl-s2">    {</span>
<span class="pl-s2">        <span class="pl-vo">$this</span><span class="pl-k">-&gt;</span>doAction(<span class="pl-k">new</span> <span class="pl-s3">Action\</span><span class="pl-s3">CopyAllAction</span>);</span>
<span class="pl-s2">    }</span>
<span class="pl-s2">}</span></pre></div>

<p>Now you can do some actions here.</p>

<h4>
<a id="4-test-your-task" class="anchor" href="#4-test-your-task" aria-hidden="true"><span class="octicon octicon-link"></span></a>(4) Test your task</h4>

<p>Typing this command and you can go into your task controller:</p>

<div class="highlight highlight-bash"><pre>php bin/generator mytask <span class="pl-k">&lt;</span>arguments<span class="pl-k">&gt;</span></pre></div>

<h2>
<a id="integrate-to-your-project-or-framework" class="anchor" href="#integrate-to-your-project-or-framework" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integrate To Your Project or Framework</h2>

<p>PHP Code Generator can integrate to any framework instead default Joomla Console Application. Just create an <code>IO</code> class
to help PHP Code Generator input and output some information:</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-k">use</span> <span class="pl-s3">CodeGenerator\IO\IOInterface</span>;</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-st">class</span> <span class="pl-en">MyIOAdapter</span> <span class="pl-s">implements</span> <span class="pl-e">IOInterface</span></span>
<span class="pl-s2">{</span>
<span class="pl-s2">    <span class="pl-c">// Implelemt this interface</span></span>
<span class="pl-s2">}</span></pre></div>

<p>Then use <code>GeneratorController</code> in your project entry (For example: Symfony Console):</p>

<div class="highlight highlight-php"><pre><span class="pl-s2"><span class="pl-vo">$controller</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-s3">GeneratorController</span>(<span class="pl-k">new</span> <span class="pl-s3">MyIOAdapter</span>(<span class="pl-vo">$input</span>, <span class="pl-vo">$output</span>));</span>
<span class="pl-s2"></span>
<span class="pl-s2"><span class="pl-vo">$controller</span><span class="pl-k">-&gt;</span>setTask(<span class="pl-vo">$input</span><span class="pl-k">-&gt;</span>getArgument(<span class="pl-s1"><span class="pl-pds">'</span>task<span class="pl-pds">'</span></span>))<span class="pl-k">-&gt;</span>execute();</span></pre></div>

<p>OK it's very easy, have a good time in your code recipe.</p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Todo</h2>

<ul>
<li>DatabaseOperator</li>
<li>GitOperator</li>
<li>FtpOperator</li>
<li>UnitTest</li>
<li>Completed docblock</li>
<li>Easy to add task controller and command</li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-48372917-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>